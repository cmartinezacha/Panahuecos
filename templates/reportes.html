{% extends "layout.html" %}

{% block footer %}
<ul class="nav navbar-nav" id="tabs-top-navbar">
	<li><a href="/">Noticias</a></li>
	<li class="active"><a href="/reportes">Reportes</a></li>
</ul>
{% endblock %}

{% block content %} 
<body>
	<button type="button" class="btn btn-info agregar-reporte pull-right" data-toggle="modal" data-target="#myModal">Agregar<br>Reporte <span class="glyphicon glyphicon-file"></span> </button>
	<div class="centered">
		<div class="left-half">
			<div class="container form">
			  <!-- Modal -->
			  <div class="modal fade" id="myModal" role="dialog">
			    <div class="modal-dialog">
			    
			      <!-- Modal content-->
			      <div class="modal-content">
			        <div class="modal-header">
			          <button type="button" class="close" data-dismiss="modal">&times;</button>
			          <h3 class="modal-title">Agrega tu Reporte</h3>
			        </div>
			        <div class="modal-body">

			          <div class="container">
			            <form class="form-horizontal" role="form" method= "POST" action="/reportes/agregar" enctype="multipart/form-data" id="nuevo-reporte">
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Correo electrónico:</label>
			                <div class="col-sm-4">
			                  <input type="email" class="form-control" id="email" placeholder="ejemplo@hotmail.com" name="email" required>
			                </div>
			              </div>
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="pwd">Tipo de daño:</label>
			                <div class="col-sm-4">          
			                  <select name="problema" required>
			                  	{% for problema in problemas %}
			                    <option>{{problema}}</option>
			                    {% endfor %}
			                 </select>
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="pwd">Región:</label>
			                <div class="col-sm-4">          
			                  <select name="area" required>
			                  	{% for region in regiones %}
			                    <option>{{region.decode('utf8')}}</option>
			                    {% endfor %}
			                 </select>
			                </div>
			              </div>
			              
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Localización Breve:</label>
			                <div class="col-sm-4">
			                  <input type="text" class="form-control" placeholder="Ejemplo: Calle 50" name="localizacion" required>
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Detalles:</label>
			                <div class="col-sm-4">
			                  <textarea class="form-control" rows="5" placeholder="Escribir localización detallada" name="details" form="nuevo-reporte" style="resize:none" required></textarea>
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Adjuntar Foto:</label>
			                <div class="col-sm-4">
			                  <input type="file" name="file">
			                </div>
			              </div>
			              
			              <div class="form-group">        
			                <div class="col-sm-offset-2 col-sm-10">
			                  <button type="submit" class="btn btn-info" id="nuevoreporte">Agregar</button>
			                </div>
			              </div>
			            </form>
			          </div>
			        </div>
			      </div>
			      
			    </div>
			  </div>
			</div>

			<form method= "POST">
			<button type="submit" class="btn btn-info" id="filtro">Filtrar</button>
			<div class="filtros">
				<section class="estado">
					<h4 class="filtro-ind">Estado:</h4>
					{% for estado in estados %}
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="{{estado.decode('utf8')}}" {% if estado.decode('utf8') in estados_checkiados %} checked {% endif%} {% if estados == estados_checkiados %}checked {% endif %}>
					    {{estado.decode('utf8')}}
					  </label>
					</div>
					{% endfor %}
				</section>

				<section class="region">
					<h4 class="filtro-ind">Región:</h4>
					{% for region in regiones %}
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="region" value="{{region.decode('utf8')}}" {% if region.decode('utf8') in regiones_checkiadas %} checked{% endif%} {% if regiones == regiones_checkiadas %}checked {% endif %}>
					    {{region.decode('utf8')}}
					  </label>
					</div>
					{% endfor %}
				</section>

				<section class="tipo-de-dano">
					<h4 class="filtro-ind problema">Tipo de daño:</h4>

					{% for problema in problemas %}
			               
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="problema" value="{{problema}}" {% if problema.decode('utf8') in problemas_checkiados %} checked{% endif%} {% if problemas == problemas_checkiados %}checked {% endif %}>
					    {{problema}}
					  </label>
					</div>
					{% endfor %}
				</section>
			</div>
			
			</form>
		</div>

		<div class="right-half entries">
			{% for reporte in reportes %}
				<div class="reporte" data-toggle="collapse" data-parent="#accordion" href="#collapse_{{reporte.id}}" aria-controls="collapse_{{reporte.id}}">
					<div class="reporte-peque">
						<div class="like pull-right">
							<a href="#" class="btn btn-info btn-lg like">Like <span class="glyphicon glyphicon-thumbs-up"></span> </a>
						</div>
						<h3 class = "titulo-de-reporte">{{reporte.problema}} - {{reporte.localizacion_breve}}</h3>

						<h4 class = "estado-displayed">{{reporte.state}}</h4>
					</div>

					<div id="collapse_{{reporte.id}}" class="detalles panel-collapse collapse container" role="tabpanel" aria-labelledby="headingOne">
						<div class="grupito">
							{% if reporte.image %}
							<div class="col-sm-6 detalles-ubic">
					      		{{reporte.details}}
							</div>
				      		<div class="col-sm-4 imagen-up">
						      	<img class="imagen" src="/images/{{reporte.id}}.jpg">
				      		</div>
				      		{% else %}
							<div class="detalles-ubic-sin-img">
					      		{{reporte.details}}
							</div>
				      		{% endif %}
				      	</div>
			      		<div class="datos">
			      			<h6>{{reporte.date|datetime}} - {{reporte.likes}} likes</h6>
			      		</div>
			      	</div>
			    </div>				
			{% endfor %}
		</div>
	</div>

</body>
{% endblock %}

</html>

