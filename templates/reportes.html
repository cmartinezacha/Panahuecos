{% extends "layout.html" %}

{% block head %}
    <link rel="stylesheet" href="static/reportes.css">
{% endblock %}

{% block footer %}
<ul class="nav navbar-nav">
	<li><a href="/">Noticias</a></li>
	<li class="active"><a href="/reportes">Reportes</a></li>
</ul>
{% endblock %}

{% block content_body %}
<button type="button" class="btn btn-info btn-lg agregar-reporte pull-right" data-toggle="modal" data-target="#myModal" style="margin-top:4px; margin-right:2em">Agregar Reporte</button>
{% endblock %}

{% block content %} 
<body>
	<div class="container-fluid">
	<div class="row">

		<div class="col-md-2 left-part">
			<div class="container form">
			  <!-- Modal -->
			  <div class="modal fade" id="myModal" role="dialog">
			    <div class="modal-dialog">
			    
			      <!-- Modal content-->
			      <div class="modal-content">
			        <div class="modal-header">
			          <button type="button" class="close" data-dismiss="modal">&times;</button>
			          <h3 class="modal-title">Agrega tu Reporte</h3>
			        </div>
			        <div class="modal-body">

			          <div class="container">
			            <form class="form-horizontal" role="form" method= "POST" action="/reportes/agregar">
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Correo electrónico:</label>
			                <div class="col-sm-4">
			                  <input type="email" class="form-control" id="email" placeholder="ejemplo@hotmail.com" name="email">
			                </div>
			              </div>
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="pwd">Tipo de daño:</label>
			                <div class="col-sm-4">          
			                  <select name="problema">
			                  	{% for problema in problemas %}
			                    <option>{{problema}}</option>
			                    {% endfor %}
			                 </select>
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="pwd">Región:</label>
			                <div class="col-sm-4">          
			                  <select name="area">
			                  	{% for region in regiones %}
			                    <option>{{region.decode('utf8')}}</option>
			                    {% endfor %}
			                 </select>
			                </div>
			              </div>
			              
			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Localización Breve:</label>
			                <div class="col-sm-4">
			                  <input type="text" class="form-control" placeholder="Ejemplo: Calle 50" name="localizacion">
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Detalles:</label>
			                <div class="col-sm-4">
			                  <input type="textarea" class="form-control" rows="10" placeholder="Escribir localización detallada" name="details">
			                </div>
			              </div>

			              <div class="form-group">
			                <label class="control-label col-sm-2" for="email">Adjuntar Foto:</label>
			                <div class="col-sm-4">
			                  <input type="file" name="file">
			                </div>
			              </div>
			              
			              <div class="form-group">        
			                <div class="col-sm-offset-2 col-sm-10">
			                  <button type="submit" class="btn btn-info" id="nuevoreporte">Agregar</button>
			                </div>
			              </div>

			            </form>
			          </div>
			        </div>
			      </div>
			      
			    </div>
			  </div>
			</div>

			<form method= "POST">
			<button type="submit" class="btn btn-info" id="filtro">Filtrar</button>
			<div class="filtros">
				<section class="estado">
					<h4 class="filtro-ind">Estado:</h4>
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="Completo" checked>
					    Completo
					  </label>
					</div>
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="En proceso" checked>
					    En proceso
					  </label>
					</div>
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="En inspección" checked>
					    En inspección
					  </label>
					</div>
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="Vencido" checked>
					    Vencido
					  </label>
					</div>
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="estado" value="Iniciado" checked>
					    Iniciado
					  </label>
					</div>
				</section>

				<section class="region">
					<h4 class="filtro-ind">Región:</h4>
					{% for region in regiones %}
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="region" value="{{region.decode('utf8')}}" checked>
					    {{region.decode('utf8')}}
					  </label>
					</div>
					{% endfor %}
				</section>

				<section class="tipo-de-dano">
					<h4 class="filtro-ind problema">Tipo de daño:</h4>

					{% for problema in problemas %}
			               
					<div class="checkbox">
					  <label>
					    <input type="checkbox" name="problema" value="{{problema}}" checked>
					    {{problema}}
					  </label>
					</div>
					{% endfor %}
				</section>
			</div>
			
			</form>
		</div>

		<div class="col-md-7 entries">
			{% for reporte in reportes %}
				<div class="reporte" data-toggle="collapse" data-parent="#accordion" href="#collapse_{{reporte.id}}" aria-controls="collapse_{{reporte.id}}">
					<h3 class = "titulo-de-reporte">{{reporte.problema}} - {{reporte.localizacion_breve}}</h3>
					<h4 class = "estado">{{reporte.state}}</h4>
					<div id="collapse_{{reporte.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
				      	<div>
				      		{{reporte.details}}
				      		<div class="datos">
								<h6>{{reporte.date|datetime}} - {{reporte.likes}} likes</h6>
							</div>
				      	</div>
				    </div>
			    </div>				
			{% endfor %}
		</div>
		
		<div class="col-md-3">
		</div>

	</div>
	</div>
</body>
{% endblock %}

</html>

